<%- include("../_header") -%>

<div>
  <nav class="bg-white border-b border-gray-200" x-data="{ isOpen: false }">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <div class="flex items-center">
          <div class="flex-shrink-0 text-xl font-bold text-teal-700">
            nsheet
          </div>
          <div class="hidden md:block">
            <div class="ml-8 flex items-baseline">
              <a
                href="#"
                class="ml-4 px-2 py-2 rounded-md text-sm font-medium text-gray-900 hover:bg-gray-100 focus:outline-none"
                >Projects</a
              >
              <a
                href="#"
                class="ml-4 px-2 py-2 rounded-md text-sm font-medium text-gray-900 hover:bg-gray-100 focus:outline-none"
                >Reports</a
              >
              <a
                href="#"
                class="ml-4 px-2 py-2 rounded-md text-sm font-medium text-gray-900 hover:bg-gray-100 focus:outline-none"
                >Docs</a
              >
            </div>
          </div>
        </div>
        <div class="hidden md:block">
          <div class="ml-4 flex items-center md:ml-6">
            <!-- Profile dropdown -->
            <div class="ml-3 relative" x-data="{ isToggle: false }">
              <div>
                <button
                  class="max-w-xs flex items-center text-sm rounded-full text-white focus:outline-none focus:shadow-solid"
                  id="user-menu"
                  aria-label="User menu"
                  aria-haspopup="true"
                  @click="isToggle = !isToggle"
                >
                  <img
                    class="h-8 w-8 rounded-full"
                    src="<%= user.picture %> "
                    alt=""
                  />
                </button>
              </div>
              <!--
                Profile dropdown panel, show/hide based on dropdown state.

                Entering: "transition ease-out duration-100"
                  From: "transform opacity-0 scale-95"
                  To: "transform opacity-100 scale-100"
                Leaving: "transition ease-in duration-75"
                  From: "transform opacity-100 scale-100"
                  To: "transform opacity-0 scale-95"
              -->
              <div
                x-show="isToggle"
                x-transition:enter="transition ease-out duration-100 transform"
                x-transition:enter-start="opacity-0 scale-95"
                x-transition:enter-end="opacity-100 scale-100"
                x-transition:leave="transition ease-in duration-75 transform"
                x-transition:leave-start="opacity-100 scale-100"
                x-transition:leave-end="opacity-0 scale-95"
                class="origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg"
              >
                <div
                  class="py-1 rounded-md bg-white shadow-xs"
                  role="menu"
                  aria-orientation="vertical"
                  aria-labelledby="user-menu"
                >
                  <a
                    href="#"
                    class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                    role="menuitem"
                    >Settings</a
                  >
                  <a
                    href="/auth/logout"
                    class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                    role="menuitem"
                    >Sign out</a
                  >
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="-mr-2 flex md:hidden">
          <!-- Mobile menu button -->
          <button
            class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:text-white"
            @click="isOpen = !isOpen"
          >
            <!-- Menu open: "hidden", Menu closed: "block" -->
            <svg
              class="block h-6 w-6"
              stroke="currentColor"
              fill="none"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              />
            </svg>
            <!-- Menu open: "block", Menu closed: "hidden" -->
            <svg
              class="hidden h-6 w-6"
              stroke="currentColor"
              fill="none"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12"
              />
            </svg>
          </button>
        </div>
      </div>
    </div>

    <!--
      Mobile menu, toggle classes based on menu state.

      Open: "block", closed: "hidden"
    -->
    <div class="block md:hidden" :class="{'block': isOpen, 'hidden': !isOpen }">
      <div class="px-2 pt-2 pb-3 sm:px-3">
        <a
          href="#"
          class="mt-1 block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700 focus:outline-none focus:text-white focus:bg-gray-700"
          >Projects</a
        >
        <a
          href="#"
          class="mt-1 block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700 focus:outline-none focus:text-white focus:bg-gray-700"
          >Reports</a
        >
        <a
          href="#"
          class="mt-1 block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700 focus:outline-none focus:text-white focus:bg-gray-700"
          >Docs</a
        >
      </div>
      <div class="pt-4 pb-3 border-t border-gray-700">
        <div class="flex items-center px-5">
          <div class="flex-shrink-0">
            <img
              class="h-10 w-10 rounded-full"
              src="<%= user.picture %>"
              alt=""
            />
          </div>
          <div class="ml-3">
            <div class="text-base font-medium leading-none text-white">
              <%= user.name %>
            </div>
            <div class="mt-1 text-sm font-medium leading-none text-gray-400">
              <%= user.email %>
            </div>
          </div>
        </div>
        <div class="mt-3 px-2">
          <a
            href="#"
            class="mt-1 block px-3 py-2 rounded-md text-base font-medium text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:text-white focus:bg-gray-700"
            >Settings</a
          >
          <a
            href="/auth/logout"
            class="mt-1 block px-3 py-2 rounded-md text-base font-medium text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:text-white focus:bg-gray-700"
            >Sign out</a
          >
        </div>
      </div>
    </div>
  </nav>

  <header class="bg-white shadow">
    <div class="max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8">
      <h1 class="text-xl font-bold leading-tight text-gray-900">
        Projects
      </h1>
    </div>
  </header>
  <main>
    <div class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
      <% if(projects) { %> <% projects.forEach(project => { %>
      <div class="block max-w-sm rounded overflow-hidden shadow-md">
        <div class="px-6 py-4 bg-white">
          <h3 class="font-bold text-xl mb-2 text-teal-800">
            <%= project.name %>
          </h3>
          <div class="flex justify-between items-center">
            <%= project.endpoints.length || 0 %> endpoint(s)
            <a
              href="/projects/<%= project._id %>"
              class="text-teal-900 font-bold px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded"
              >Manage</a
            >
          </div>
        </div>
      </div>
      <% }); %> <% } else { %>
      <div class="py-2 text-center flex items-center flex-col">
        <img src="images/no-data.svg" class="w-48" alt="" />
        <p class="text-xl py-4">
          You don't have any projects
        </p>
        <a class="text-teal-700 font-bold" href="/projects/create"
          >Create your first project</a
        >
      </div>
      <% } %>
    </div>
  </main>
</div>

<%- include("../_footer") -%>
