<%- include("../_header") -%> <%- include("../_backend") -%>

<header class="bg-white shadow">
  <div class="container flex justify-between items-center">
    <h1 class="text-xl font-bold leading-tight text-gray-900">
      Projects
    </h1>
    <a href="/projects/create" class="btn-primary">
      New Project
    </a>
  </div>
</header>

<%- include("../_flash") -%>

<main>
  <div class="container">
    <% if(projects.length) { %>
    <div class="flex flex-wrap -m-2">
      <% projects.forEach(project => { %>
      <div class="block w-full sm:w-1/2 md:w-1/3 overflow-hidden p-2">
        <div class="px-6 py-4 bg-white shadow-md rounded">
          <h3 class="font-bold text- mb-2">
            <%= project.name %>
          </h3>
          <div class="flex justify-between items-center">
            <% if(project.endpoints) { %>
            <p class="text-gray-700">
              <%= project.endpoints.length %> endpoint(s)
            </p>
            <% } else { %>
            <p class="text-gray-700">0 endpoint</p>
            <% } %>
            <a href="/projects/<%= project._id %>" class="btn-secondary">Manage</a>
          </div>
        </div>
      </div>
      <% }); %>
    </div>
    <% } else { %>
    <div class="py-2 text-center flex items-center flex-col">
      <img src="images/no-data.svg" class="w-48" alt="" />
      <p class="text-xl py-4">
        You don't have any projects
      </p>
      <a class="text-teal-700 font-bold" href="/projects/create">Create your first project</a>
    </div>
    <% } %>
  </div>
</main>

<%- include("../_footer") -%>